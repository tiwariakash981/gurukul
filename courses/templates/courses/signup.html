{% extends 'courses/base.html' %}
{% load static %}
{% load course_custom_tags %}
{% block title %} Signup {% endblock %}

{% block head %}
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap'>
<style>
  * {
    font-family: "Poppins", sans-serif;
  }

  /* Navbar styles */
  .navbar {
    height: 60px !important;
    padding: 0 2rem !important;
    background: white !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    box-shadow: none !important; /* Remove the shadow */
    border: none !important; /* Remove any borders */
    margin: 0 !important; /* Remove any margins */
}

  .navbar::after,
  .navbar::before {
    display: none !important;
  }

  .navbar-brand {
    display: flex !important;
    align-items: center !important;
  }

  .navbar-nav {
    display: flex !important;
    align-items: center !important;
    gap: 2rem !important;
  }

  .nav-link {
    color: #3e4684 !important;
    font-weight: 500 !important;
    transition: color 0.3s ease !important;
  }

  .nav-link:hover {
    color: #333b73 !important;
  }

  /* Adjust the right-side links */
  .navbar .ml-auto {
    margin-left: auto !important;
    display: flex !important;
    align-items: center !important;
    gap: 1.5rem !important;
  }

  .signup-container {
    min-height: calc(100vh - 60px);
    display: flex;
    justify-content: center;
    align-items: center;
    background: #dde5f4;
    padding: 2rem;
    margin-top: 60px;
  }

  .screen-1 {
    background: white;
    padding: 2.5em;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 450px;
    display: flex;
    flex-direction: column;
    gap: 1.5em;
  }

  .screen-1 .logo {
    width: 80px;
    height: 80px;
    margin: 0 auto;
    margin-top: -60px;
    background: #3e4684;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 10px rgba(62,70,132,0.3);
  }

  .screen-1 .email,
  .screen-1 .password {
    background: white;
    border-radius: 12px;
    padding: 0.8em;
  }

  .sec-2 {
    display: flex;
    align-items: center;
    gap: 0.5em;
    background: #f8fafc;
    padding: 0.8em;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
  }

  .screen-1 input {
    border: none;
    outline: none;
    width: 100%;
    background: transparent;
    font-size: 0.95em;
    color: #333;
  }

  .screen-1 input::placeholder {
    color: #94a3b8;
  }

  .screen-1 label {
    display: block;
    color: #333;
    font-size: 0.9em;
    font-weight: 500;
    margin-bottom: 0.5em;
  }

  .screen-1 ion-icon {
    color: #64748b;
    font-size: 1.2em;
  }

  .screen-1 .password .show-hide {
    cursor: pointer;
    transition: color 0.3s ease;
  }

  .screen-1 .password .show-hide:hover {
    color: #3e4684;
  }

  .screen-1 .signup {
    background: #3e4684;
    color: white;
    padding: 1em;
    border: none;
    border-radius: 30px;
    font-weight: 600;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 0.5em;
  }

  .screen-1 .signup:hover {
    background: #333b73;
    transform: translateY(-2px);
  }

  .screen-1 .footer {
    text-align: center;
    font-size: 0.9em;
    color: #64748b;
    margin-top: 0.5em;
  }

  .screen-1 .footer a {
    color: #3e4684;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
  }

  .screen-1 .footer a:hover {
    color: #333b73;
    text-decoration: underline;
  }

  .errorlist {
    list-style: none;
    padding: 0;
    margin: 0.3em 0 0;
    color: #dc2626;
    font-size: 0.8em;
  }

  @media (max-width: 640px) {
    .screen-1 {
      padding: 2em 1.5em;
      margin: 1rem;
    }

    .screen-1 .logo {
      width: 70px;
      height: 70px;
      margin-top: -50px;
    }
  }
</style>
{% endblock %}

{% block start %}
<div class="signup-container">
  <div class="screen-1">
    <div class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="40" height="40">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
        <circle cx="12" cy="12" r="3" fill="white"/>
      </svg>
    </div>

    <form method="post" action='/signup'>
        {% csrf_token %}
        
        <div class="email">
            <label for="id_first_name">First Name</label>
            <div class="sec-2">
                <ion-icon name="person-outline"></ion-icon>
                {{ form.first_name }}
            </div>
            {{ form.first_name.errors }}
        </div>

        <div class="email">
            <label for="id_last_name">Last Name</label>
            <div class="sec-2">
                <ion-icon name="person-outline"></ion-icon>
                {{ form.last_name }}
            </div>
            {{ form.last_name.errors }}
        </div>

        <div class="email">
            <label for="id_username">Username</label>
            <div class="sec-2">
                <ion-icon name="person-circle-outline"></ion-icon>
                {{ form.username }}
            </div>
            {{ form.username.errors }}
        </div>

        <div class="email">
            <label for="id_email">Email Address</label>
            <div class="sec-2">
                <ion-icon name="mail-outline"></ion-icon>
                {{ form.email }}
            </div>
            {{ form.email.errors }}
        </div>

        <div class="password">
            <label for="id_password1">Password</label>
            <div class="sec-2">
                <ion-icon name="lock-closed-outline"></ion-icon>
                {{ form.password1 }}
                <ion-icon class="show-hide" name="eye-outline"></ion-icon>
            </div>
            {{ form.password1.errors }}
        </div>

        <div class="password">
            <label for="id_password2">Confirm Password</label>
            <div class="sec-2">
                <ion-icon name="lock-closed-outline"></ion-icon>
                {{ form.password2 }}
                <ion-icon class="show-hide" name="eye-outline"></ion-icon>
            </div>
            {{ form.password2.errors }}
        </div>

        <button type="submit" class="signup">Sign Up</button>

        <div class="footer">
            <span>Already have an account? <a href="/login">Login</a></span>
        </div>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add placeholders to the form fields
    const placeholders = {
        'id_first_name': 'Enter your first name',
        'id_last_name': 'Enter your last name',
        'id_username': 'Choose a username',
        'id_email': 'your.email@example.com',
        'id_password1': '············',
        'id_password2': '············'
    };

    Object.keys(placeholders).forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.placeholder = placeholders[id];
        }
    });

    // Handle password visibility toggle
    const togglePassword = document.querySelectorAll('.show-hide');
    const passwords = [document.getElementById('id_password1'), document.getElementById('id_password2')];

    togglePassword.forEach((toggle, index) => {
        toggle.addEventListener('click', function() {
            const type = passwords[index].getAttribute('type') === 'password' ? 'text' : 'password';
            passwords[index].setAttribute('type', type);
            this.setAttribute('name', type === 'password' ? 'eye-outline' : 'eye-off-outline');
        });
    });
});
</script>
{% endblock %}

